<!doctype html><html lang="pt-BR" dir="ltr"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Construindo uma API RESTful com Laravel - Parte 2</title><meta name="description" content="Web development, front end stuff, tutorials for beginners and more by Rafaell Lycan! "><meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o"/><meta name="robots" content="index, follow"><meta name="HandheldFriendly" content="True" /><meta name="MobileOptimized" content="320" /><meta name="mobile-web-app-capable" content="yes"><link rel="canonical" href="http://localhost:4000/2016/construindo-restful-api-laravel-parte-2/"><link rel="alternate" type="application/rss+xml" title="Hi there, I'm Rafaell" href="http://feeds.feedburner.com/MikeFowler" /><link rel="shortcut icon" href="/assets/img/icons/favicon.ico" type="image/x-icon" /><link rel="author" href="https://plus.google.com/+https://plus.google.com/+RafaellLycan?rel=author"><link rel='dns-prefetch' href='//ajax.googleapis.com' /><link rel='dns-prefetch' href='//fonts.googleapis.com' /><link rel='dns-prefetch' href='//use.fontawesome.com' /><link rel='dns-prefetch' href='//s.gravatar.com' /><link rel='dns-prefetch' href='//s2.getsmartlook.com'><link rel='dns-prefetch' href='//rec.getsmartlook.com'><link rel='preconnect' href='//fonts.googleapis.com' crossorigin /><link rel='preconnect' href='//fonts.gstatic.com' crossorigin><link rel='preconnect' href='//s2.getsmartlook.com' crossorigin><link rel='preconnect' href='//rec.getsmartlook.com' crossorigin> <meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="@RafaellLycan" /><meta name="twitter:title" content="Construindo uma API RESTful com Laravel - Parte 2" /><meta name="twitter:description" content="Web development, front end stuff, tutorials for beginners and more by Rafaell Lycan! " /><meta property="twitter:image:src" content="http://localhost:4000assets/img/posts/laravel-api.jpg"> <meta property="og:title" content="Construindo uma API RESTful com Laravel - Parte 2"><meta property="og:url" content="http://localhost:4000/2016/construindo-restful-api-laravel-parte-2/"><meta property="og:description" content="Web development, front end stuff, tutorials for beginners and more by Rafaell Lycan! "><meta property="og:image" content="http://localhost:4000assets/img/posts/laravel-api.jpg"><meta property="og:type" content="article"><meta property="og:site_name" content="Hi there, I'm Rafaell"><link rel="manifest" href="/manifest.json"><link rel="apple-touch-icon" href="/assets/img/icon-96x96.png"><link rel="icon" sizes="192x192" href="/assets/img/icon-192x192.png"><link rel="shortcut icon" href="/assets/img/icon-192x192.png"><style> @charset "UTF-8"; /** Variables */ /** Colors */ /* * It returns the current percent of a context on a reference using pixels * Thanks Ethan Marcotte */ /* * It returns flexible value using 'target / context' formula. * Returns 'rem' as format. */ /* Breakpoint mixin */ /* * It create the current percent of a context on a reference using pixels * Thanks Ethan Marcotte */ /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */ /* Document ========================================================================== */ /** 1. Change the default font family in all browsers (opinionated). 2. Correct the line height in all browsers. 3. Prevent adjustments of font size after orientation changes in IE on Windows Phone and in iOS. */ html { font-family: sans-serif; /* 1 */ line-height: 1.15; /* 2 */ -ms-text-size-adjust: 100%; /* 3 */ -webkit-text-size-adjust: 100%; /* 3 */ } /* Sections ========================================================================== */ /** Remove the margin in all browsers (opinionated). */ body { margin: 0; } /** Add the correct display in IE 9-. */ article, aside, footer, header, nav, section { display: block; } /** Correct the font size and margin on `h1` elements within `section` and `article` contexts in Chrome, Firefox, and Safari. */ h1, .h1 { font-size: 2em; margin: 0.67em 0; } /* Grouping content ========================================================================== */ /** Add the correct display in IE 9-. 1. Add the correct display in IE. */ figcaption, figure, main { /* 1 */ display: block; } /** Add the correct margin in IE 8. */ figure { margin: 1em 40px; } /** 1. Add the correct box sizing in Firefox. 2. Show the overflow in Edge and IE. */ hr { box-sizing: content-box; /* 1 */ height: 0; /* 1 */ overflow: visible; /* 2 */ } /** 1. Correct the inheritance and scaling of font size in all browsers. 2. Correct the odd `em` font sizing in all browsers. */ pre { font-family: monospace, monospace; /* 1 */ font-size: 1em; /* 2 */ } /* Text-level semantics ========================================================================== */ /** 1. Remove the gray background on active links in IE 10. 2. Remove gaps in links underline in iOS 8+ and Safari 8+. */ a { background-color: transparent; /* 1 */ -webkit-text-decoration-skip: objects; /* 2 */ } /** Remove the outline on focused links when they are also active or hovered in all browsers (opinionated). */ a:active, a:hover { outline-width: 0; } /** 1. Remove the bottom border in Firefox 39-. 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari. */ abbr[title] { border-bottom: none; /* 1 */ text-decoration: underline; /* 2 */ text-decoration: underline dotted; /* 2 */ } /** Prevent the duplicate application of `bolder` by the next rule in Safari 6. */ b, strong { font-weight: inherit; } /** Add the correct font weight in Chrome, Edge, and Safari. */ b, strong { font-weight: bolder; } /** 1. Correct the inheritance and scaling of font size in all browsers. 2. Correct the odd `em` font sizing in all browsers. */ code, kbd, samp { font-family: monospace, monospace; /* 1 */ font-size: 1em; /* 2 */ } /** Add the correct font style in Android 4.3-. */ dfn { font-style: italic; } /** Add the correct background and color in IE 9-. */ mark { background-color: #ff0; color: #000; } /** Add the correct font size in all browsers. */ small { font-size: 80%; } /** Prevent `sub` and `sup` elements from affecting the line height in all browsers. */ sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; } sub { bottom: -0.25em; } sup { top: -0.5em; } /* Embedded content ========================================================================== */ /** Add the correct display in IE 9-. */ audio, video { display: inline-block; } /** Add the correct display in iOS 4-7. */ audio:not([controls]) { display: none; height: 0; } /** Remove the border on images inside links in IE 10-. */ img { border-style: none; } /** Hide the overflow in IE. */ svg:not(:root) { overflow: hidden; } /* Forms ========================================================================== */ /** 1. Change the font styles in all browsers (opinionated). 2. Remove the margin in Firefox and Safari. */ button, input, optgroup, select, textarea { font-family: sans-serif; /* 1 */ font-size: 100%; /* 1 */ line-height: 1.15; /* 1 */ margin: 0; /* 2 */ } /** Show the overflow in IE. 1. Show the overflow in Edge. */ button, input { /* 1 */ overflow: visible; } /** Remove the inheritance of text transform in Edge, Firefox, and IE. 1. Remove the inheritance of text transform in Firefox. */ button, select { /* 1 */ text-transform: none; } /** 1. Prevent a WebKit bug where (2) destroys native `audio` and `video` controls in Android 4. 2. Correct the inability to style clickable types in iOS and Safari. */ button, html [type="button"], [type="reset"], [type="submit"] { -webkit-appearance: button; /* 2 */ } /** Remove the inner border and padding in Firefox. */ button::-moz-focus-inner, [type="button"]::-moz-focus-inner, [type="reset"]::-moz-focus-inner, [type="submit"]::-moz-focus-inner { border-style: none; padding: 0; } /** Restore the focus styles unset by the previous rule. */ button:-moz-focusring, [type="button"]:-moz-focusring, [type="reset"]:-moz-focusring, [type="submit"]:-moz-focusring { outline: 1px dotted ButtonText; } /** Change the border, margin, and padding in all browsers (opinionated). */ fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; } /** 1. Correct the text wrapping in Edge and IE. 2. Correct the color inheritance from `fieldset` elements in IE. 3. Remove the padding so developers are not caught out when they zero out `fieldset` elements in all browsers. */ legend { box-sizing: border-box; /* 1 */ color: inherit; /* 2 */ display: table; /* 1 */ max-width: 100%; /* 1 */ padding: 0; /* 3 */ white-space: normal; /* 1 */ } /** 1. Add the correct display in IE 9-. 2. Add the correct vertical alignment in Chrome, Firefox, and Opera. */ progress { display: inline-block; /* 1 */ vertical-align: baseline; /* 2 */ } /** Remove the default vertical scrollbar in IE. */ textarea { overflow: auto; } /** 1. Add the correct box sizing in IE 10-. 2. Remove the padding in IE 10-. */ [type="checkbox"], [type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ } /** Correct the cursor style of increment and decrement buttons in Chrome. */ [type="number"]::-webkit-inner-spin-button, [type="number"]::-webkit-outer-spin-button { height: auto; } /** 1. Correct the odd appearance in Chrome and Safari. 2. Correct the outline style in Safari. */ [type="search"] { -webkit-appearance: textfield; /* 1 */ outline-offset: -2px; /* 2 */ } /** Remove the inner padding and cancel buttons in Chrome and Safari on macOS. */ [type="search"]::-webkit-search-cancel-button, [type="search"]::-webkit-search-decoration { -webkit-appearance: none; } /** 1. Correct the inability to style clickable types in iOS and Safari. 2. Change font properties to `inherit` in Safari. */ ::-webkit-file-upload-button { -webkit-appearance: button; /* 1 */ font: inherit; /* 2 */ } /* Interactive ========================================================================== */ /* Add the correct display in IE 9-. 1. Add the correct display in Edge, IE, and Firefox. */ details, menu { display: block; } /* Add the correct display in all browsers. */ summary { display: list-item; } /* Scripting ========================================================================== */ /** Add the correct display in IE 9-. */ canvas { display: inline-block; } /** Add the correct display in IE. */ template { display: none; } /* Hidden ========================================================================== */ /** Add the correct display in IE 10-. */ [hidden] { display: none; } /** Basic styling */ *, *:before, *:after { box-sizing: border-box; } body { font: 1rem/1.8rem "Merriweather", "PT Serif", Georgia, Cambria, "Times New Roman", Times, serif; letter-spacing: 0.01rem; color: #4f5a63; background: #fff; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; } /** Images */ img { max-width: 100%; vertical-align: middle; border-radius: 2px; } /** Figures */ figure { width: 100%; margin: 0 auto; position: relative; clear: both; outline: 0; box-sizing: border-box; user-select: auto; z-index: 100; } figure > img { display: block; } figcaption { position: relative; width: 100%; left: 0; top: 0; color: rgba(79, 90, 99, 0.6); outline: 0; text-align: center; font-size: 14px; margin: 10px auto 0; } /** Headings */ h1, .h1, h2, .h2, h3, .h3, h4, .h4, h5, h6 { font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; line-height: 1.2em; font-weight: 700; } h1, .h1 { font-size: 3rem; letter-spacing: -2px; } h2, .h2 { font-size: 2.25rem; margin-top: 3rem; letter-spacing: -1px; } h3, .h3 { font-size: 1.875rem; } h4, .h4 { font-size: 1.5rem; } @media only screen and (max-width: 768px) { h1, .h1 { font-size: 2.8rem; } h2, .h2 { font-size: 2.2rem; } } @media only screen and (max-width: 480px) { h1, .h1 { font-size: 1.75rem; } h2, .h2 { font-size: 1.5rem; } h3, .h3 { font-size: 1.3rem; } h4, .h4 { font-size: 1.125rem; } } /** Paragraphs */ p { margin: 0 0 1.875rem; } /** Blockquotes */ blockquote { position: relative; margin: 3.125rem 0; padding: 0 2.5em; font-style: italic; font-size: 1.25rem; color: rgba(79, 90, 99, 0.6); letter-spacing: -.01rem; } blockquote:after, blockquote:before { position: absolute; font-size: 4em; color: rgba(0, 0, 0, 0.6); z-index: -1; font-family: 'Droid Serif', georgia, serif; } blockquote:after { content: "”"; right: 0px; } blockquote:before { content: "“"; left: 0px; } blockquote > :last-child { margin-bottom: 0; } /** Horizontal Reference */ hr { box-sizing: content-box; height: 0; display: block; border: 0; text-align: center; margin-top: 50px; margin-bottom: 50px; } hr:before { content: '...'; display: inline-block; margin-left: .6em; color: rgba(79, 90, 99, 0.4); position: relative; top: -30px; font-size: 1.8rem; letter-spacing: .6em; } @media only screen and (max-width: 768px) { hr { margin-top: 30px; margin-bottom: 30px; font-size: 1.25rem; line-height: 1.4; } } /** Code formatting */ pre, code { font-size: 1em; border-radius: 2px; } code { font-family: "Fira Mono", "monaco", "Consolas", "Lucida Console", monospace; font-size: 1rem; letter-spacing: -0.3px; padding: 1px 5px; white-space: normal; } :not(pre) > code { background: #f5f5f5; margin-right: 0.05em; margin-left: 0.05em; padding-right: 5px; padding-left: 5px; white-space: nowrap; } pre { background: #f5f5f5; line-height: 1.35; overflow-x: auto; margin: 1.875rem 0; white-space: pre; word-wrap: normal; -webkit-overflow-scrolling: touch; } pre > code { border-radius: 2px; color: #3d3e44; display: block; outline: none; overflow-x: auto; padding: 1rem; white-space: inherit; } /** Clearfix */ .clearfix:after { content: ""; display: table; clear: both; } /** Hidden */ .hidden { visibility: hidden; display: none; } /** Default list */ .default-list { list-style-type: none; margin: 0; padding: 0; } /** Image rounded */ .img-rounded { border-radius: 50%; } /** Center */ .center { margin-left: auto; margin-right: auto; } .text-center { text-align: center !important; } .text-light { font-weight: normal; } .text-base-color { color: #0074d9; } /** Links */ a { color: #0074d9; text-decoration: none; transition: all 300ms ease-in-out; } a:hover { color: #0059a6; } a:active, a:hover { text-decoration: underline; outline: 0; } .animate { animation: fade-in-down 600ms; animation-delay: 200ms; } @-webkit-keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-10px); } 100% { opacity: 1; transform: translateY(0); } } @-moz-keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-10px); } 100% { opacity: 1; transform: translateY(0); } } @-ms-keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-10px); } 100% { opacity: 1; transform: translateY(0); } } @-o-keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-10px); } 100% { opacity: 1; transform: translateY(0); } } @keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-10px); } 100% { opacity: 1; transform: translateY(0); } } @-webkit-keyframes fade { 0% { opacity: 0; } 60% { opacity: 0; } 100% { opacity: 1; } } @-moz-keyframes fade { 0% { opacity: 0; } 60% { opacity: 0; } 100% { opacity: 1; } } @-ms-keyframes fade { 0% { opacity: 0; } 60% { opacity: 0; } 100% { opacity: 1; } } @-o-keyframes fade { 0% { opacity: 0; } 60% { opacity: 0; } 100% { opacity: 1; } } @keyframes fade { 0% { opacity: 0; } 60% { opacity: 0; } 100% { opacity: 1; } } .header { width: 100%; margin-bottom: 3.75rem; } .header .author { margin: 0 auto; max-width: 45rem; padding-left: 0; padding-right: 0; border: none; animation: fade 600ms ease; } .header img { min-width: 120px; } .header p { color: inherit; } @media only screen and (max-width: 30rem) { .header p { display: none; } } .nav { position: relative; width: 100%; text-align: center; background-color: #1d2637; font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; } .nav__brand { font-weight: 700; } @media only screen and (min-width: 48rem) { .nav__brand { position: absolute; top: 0; left: 0; } } @media only screen and (min-width: 48rem) { .nav__github { position: absolute; top: 0; right: 0; } } .nav__list { max-width: 45rem; margin: 0 auto; padding: 0; list-style: none; overflow: hidden; animation: fade 600ms ease; } .nav__item { float: left; width: 33.33%; } .nav a { display: block; padding: 0.625rem 1.875rem; font-size: 13px; color: #E2E6E7; text-decoration: none; text-transform: uppercase; letter-spacing: 1.2px; transition: all 300ms ease-in-out; } .nav a:hover { color: #0d8eff; } .nav svg { vertical-align: bottom; width: 32px; height: 32px; fill: #fff; } .main-nav { position: relative; padding: 35px 40px; margin: 0 0 30px 0; } .main-nav.overlay { position: absolute; top: 0; left: 0; right: 0; height: 70px; border: none; } .split-layout__sidebar { position: relative; display: flex; padding: 1.875rem; background: #1d2637; background: url("../svgs/bg-triangles-black.svg"); font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: white; text-align: center; flex-direction: column; align-items: center; justify-content: center; } @media only screen and (min-width: 48rem) { .split-layout__sidebar { position: fixed; width: 40%; height: 100%; left: 0; } } @media only screen and (min-width: 60rem) { .split-layout__sidebar { width: 30%; } } .split-layout__avatar { max-width: 120px; } @media only screen and (max-width: 30rem) { .split-layout__avatar { display: none; } } .split-layout__title { font-size: 1.875rem; font-weight: 300; } .split-layout__subtitle { font-size: 0.875rem; margin-top: 0; text-transform: uppercase; opacity: .4; } @media only screen and (max-width: 30rem) { .split-layout__subtitle { padding-bottom: 2rem; } } .split-layout__description { padding: 1.875rem 0 0; } @media only screen and (max-width: 30rem) { .split-layout__description { display: none; } } .split-layout__content { padding-top: 1.875rem; padding-bottom: 1.875rem; } @media only screen and (min-width: 48rem) { .split-layout__content { margin-left: 40%; width: auto; max-width: 100%; } } @media only screen and (min-width: 60rem) { .split-layout__content { margin-left: 30%; } } .split-layout .nav { position: absolute; bottom: 0; } .split-layout .nav__brand, .split-layout .nav__github { display: none; } .split-layout .section-title { display: none; } .split-layout .post-list:before, .split-layout .post-list:after { display: none; }</style><link rel="stylesheet" href="/assets/css/main.css?1493084291212194000"><body> <main class="wrapper"><nav class="nav" role="navigation" itemtype="http://schema.org/SiteNavigationElement" itemscope> <a class="nav__brand" href="http://localhost:4000" title="Hi there, I'm Rafaell"> Rafaell Lycan </a><ul class="nav__list"><li class="nav__item"> <a href="/articles" class="nav__link" itemprop="url">Articles</a><li class="nav__item"> <a href="/projects/" class="nav__link" itemprop="url">Projects</a><li class="nav__item"> <a href="/about/" class="nav__link" itemprop="url">About</a></ul><a class="nav__github" href="https://github.com/rafaell-lycan" title="GitHub" target="github_profile"> <svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"> </path> </svg> </a></nav><article class="post single" itemscope itemtype="http://schema.org/BlogPosting"><header class="post__header container"><figure class="post__image"> <img src="/assets/img/posts/laravel-api.jpg" alt="Construindo uma API RESTful com Laravel - Parte 2" itemprop="thumbnailUrl"></figure><h1 class="post__title" itemprop="name headline"> Construindo uma API RESTful com Laravel - Parte 2</h1><div class="post__meta"> <time datetime="2016-08-05T00:00:00+02:00" itemprop="datePublished"> Aug 5, 2016 </time> <span class="section-spacing"> 3987 words </span> <span> 22 minutes read </span><ul class="meta-tag__list"><li class="meta-tag__item"> <a href="/tags/#laravel">laravel</a><li class="meta-tag__item"> <a href="/tags/#php">php</a></ul></div><div class="post__meta__divider"></div></header><section class="post__content container"><p><a href="2015/construindo-restful-api-laravel-parte-1/">No artigo anterior da série</a> nós vimos o setup básico da nossa API, mas esta na hora de fazermos mais, esta na hora de configurarmos nossas rotas e a autenticação do usuário.<p>Depois de muito tempo e alguns pedidos para continuar a série, resolvi dar uma olhada no que faltava para terminar. Resolvi então quebrar a série em 3 partes ao invés de duas.<p>Nesta parte vamos tocar os seguintes tópicos do roadmap:<ul><li><a href="#controllers-e-rotas">Controllers e Rotas</a><li><a href="#middlewares">Middlewares</a></ul><h2 id="controllers-e-rotas">Controllers e Rotas</h2><p>Para conseguirmos expor os dados do nosso banco de dados em nossa API, precisamos seguir dois passos muito simples:<ol><li>Definir as rotas dos recursos utilizados em nossa aplicação, <em>Jobs</em> e <em>Companies</em>.<li>Criar métodos em nossos controllers que irão responder as nossas rotas para cada verbo HTTP.</ol><p>Todo desenvolvedor novo que começa com laravel e vê os comandos <strong>artisan</strong> e segue ao menos a documentação chega a parte de <a href="https://laravel.com/docs/5.1/routing">routing</a>, que ao meu ver é uma das partes que me fez se apaixonar pelo framework.<p>Vamos primeiramente definir nosso grupo de recursos em <code class="highlighter-rouge">routes.php</code>:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="nx">Route</span><span class="o">::</span><span class="na">group</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'prefix'</span> <span class="o">=&gt;</span> <span class="s1">'api'</span><span class="p">),</span> <span class="k">function</span><span class="p">()</span>
<span class="p">{</span>

  <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span><span class="s1">'message'</span> <span class="o">=&gt;</span> <span class="s1">'Jobs API'</span><span class="p">,</span> <span class="s1">'status'</span> <span class="o">=&gt;</span> <span class="s1">'Connected'</span><span class="p">]);;</span>
  <span class="p">});</span>

  <span class="nx">Route</span><span class="o">::</span><span class="na">resource</span><span class="p">(</span><span class="s1">'jobs'</span><span class="p">,</span> <span class="s1">'JobsController'</span><span class="p">);</span>
  <span class="nx">Route</span><span class="o">::</span><span class="na">resource</span><span class="p">(</span><span class="s1">'companies'</span><span class="p">,</span> <span class="s1">'CompaniesController'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">redirect</span><span class="p">(</span><span class="s1">'api'</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure><p>Primeiramente, como uma boa prática é prefixar um agrupamento de rotas que irá servir como namespace da nossa API. Nesse caso utilizamos <code class="highlighter-rouge">api</code>, porem você pode utilizar qualquer outro nome e até mesmo definir uma versão da API. Também sabemos que serão criados 2 controllers RESTful que irão lidar com o HTTP para os recursos <strong>jobs</strong> e <strong>companies</strong>. Por fim também foi adicionado um redirect caso o usuário dê um <strong>GET</strong> na raiz da aplicação.<p>Nosso primeiro recurso será <code class="highlighter-rouge">jobs</code> que é a base da nossa aplicação e esta relacionado ao segundo recurso <code class="highlighter-rouge">companies</code> que será o meio de gerenciar essas vagas. Pense nesse recurso como um recurso de usuário, mas ao invés de informações sobre o mesmo temos informações sobre a empresa.<p>Sabendo disso, vamos criar nossos recursos utilizando <strong>Artisan</strong> para gerar nossos controllers:<figure class="highlight"><pre><code class="language-php" data-lang="php">php artisan make:controller JobsController</code></pre></figure><figure class="highlight"><pre><code class="language-php" data-lang="php">php artisan make:controller CompaniesController</code></pre></figure><p>Navegando até o diretório <code class="highlighter-rouge">app/Http/Controllers</code> você vai notar que os arquivos <code class="highlighter-rouge">CompaniesController.php</code> e <code class="highlighter-rouge">JobsController.php</code> foram criados.<h4 id="listando-rotas">Listando rotas</h4><p>Toda vez que registramos um <strong>resource route</strong>, o Laravel adiciona e lista os endpoints que podem ser utilizados, e podemos consulta-los através do comando:<figure class="highlight"><pre><code class="language-php" data-lang="php">php artisan route:list</code></pre></figure><p>Isso ira nos retornar uma lista das rotas definidas seguidas pelo verbo HTTP correspondente. No fim, teremos uma listagem como essa.<div class="center"><p><img src="/assets/img/posts/laravel-route-list.png" alt="Laravel Route List" /></div><h4 id="listando-registros">Listando registros</h4><p>Até agora tudo bem, não tivemos nada muito complexo e para finalizar essa sessão de forma razoável, vamos fazer nosso <code class="highlighter-rouge">JobsController</code> retornar nossos jobs cadastrados <del>aqueles criados no seed</del> utilizando o método <code class="highlighter-rouge">index</code>:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/JobsController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Job</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">JobsController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$jobs</span> <span class="o">=</span> <span class="nx">Job</span><span class="o">::</span><span class="na">with</span><span class="p">(</span><span class="s1">'company'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$jobs</span><span class="p">);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>O método <code class="highlighter-rouge">index</code> é normalmente utilizado para listar todos os dados do recurso, em outras palavras como um <strong>get all</strong>, e isso é exatamente o que ele esta fazendo aqui. Estamos utilizando em conjunto o <a href="https://laravel.com/docs/5.0/eloquent#eager-loading">eager loading</a> para retornar nossos <strong>jobs</strong> que estão associados com <strong>companies</strong> e só ai retornando. Também note que utilizamos nosso model <code class="highlighter-rouge">Job</code> no todo com o a declaração <code class="highlighter-rouge">use</code> para evitar o namespace toda vez que for utiliza-lo.<p>Para termos certeza de que esta tudo OK, podemos utilizar uma ferramente como o <a href="https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en">Postman</a> do Google Chrome que é um cliente REST para nos ajudar a testar e debugar nossas rotas da aplicação.<p>Uma vez que você já tenha o <strong>postman</strong> instalado, vamos realizar um request do tipo <code class="highlighter-rouge">GET</code> no endpoint <code class="highlighter-rouge">/api/jobs</code> e ver o retorno:<div class="center"><p><img src="/assets/img/posts/laravel-api-postman-get.png" alt="Laravel Postman GET Jobs" /></div><p>Já resolvemos a listagem dos jobs, agora vamos fazer o mesmo para empresas:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/CompaniesController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Company</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CompaniesController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$companies</span> <span class="o">=</span> <span class="nx">Company</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$companies</span><span class="p">);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>Aqui você pode ver que estamos fazendo exatamente a mesma coisa que em <code class="highlighter-rouge">JobsController</code> com a única diferença de trazer exclusivamente os dados de <strong>company</strong>. Você pode utilizar o <strong>postman</strong> para testar o endpoint <code class="highlighter-rouge">/api/companies</code> utilizando o verbo <code class="highlighter-rouge">GET</code>.<p>Já conseguimos listar nossos registros, mas algumas vezes, vamos precisar pegar apenas um passando como parâmetro no endpoint um <strong>ID</strong>, vamos fazer isso de forma simples e rápida em nossos os controllers:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/CompaniesController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Company</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CompaniesController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$company</span> <span class="o">=</span> <span class="nx">Company</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$company</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
                <span class="s1">'message'</span>   <span class="o">=&gt;</span> <span class="s1">'Record not found'</span><span class="p">,</span>
            <span class="p">],</span> <span class="mi">404</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$company</span><span class="p">);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/JobsController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Job</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">JobsController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$job</span> <span class="o">=</span> <span class="nx">Job</span><span class="o">::</span><span class="na">with</span><span class="p">(</span><span class="s1">'company'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$job</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
                <span class="s1">'message'</span>   <span class="o">=&gt;</span> <span class="s1">'Record not found'</span><span class="p">,</span>
            <span class="p">],</span> <span class="mi">404</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$job</span><span class="p">);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>Podemos ver que é um código bem simples, primeiramente utilizando o método <code class="highlighter-rouge">find($id)</code> verificamos se o registro <code class="highlighter-rouge">$id</code> é <code class="highlighter-rouge">null</code>, se sim retornamos um <strong>erro</strong> <code class="highlighter-rouge">404</code> com uma mensagem no corpo. Caso contrário atualizamos o registro atual com os dados vindos da requisição. E pronto! Você pode testar essa implementação utilizando o verbo <code class="highlighter-rouge">GET</code> nos endpoints <code class="highlighter-rouge">/api/jobs/:id</code> e <code class="highlighter-rouge">/api/companies/:id</code> apenas subistituindo <code class="highlighter-rouge">:id</code>.<h4 id="criando-registros">Criando registros</h4><p>A primeira parte foi a mais fácil, agora vamos de fato criar nossas rotas para <strong>inputar registros</strong>, vamos seguir um lógica simples:<ul><li>Precisamos pegar dados vindo de nossas requests (<code class="highlighter-rouge">POST</code>);<li>Podemos também validar os dados, adicionando alguns como obrigatórios, mas iremos com isso depois;<li>Por fim salvar os dados utilizando o Eloquent.</ul><p>Eu vou começar com a empresa, por acreditar que será mais fácil por esse caminho, então vamos seguir nossa lógica utilizando o código abaixo:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/CompaniesController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CompaniesController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$company</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Company</span><span class="p">();</span>
        <span class="nv">$company</span><span class="o">-&gt;</span><span class="na">fill</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">());</span>
        <span class="nv">$company</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$company</span><span class="p">,</span> <span class="mi">201</span><span class="p">);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>Esse código é ligeiramente simples, o método <code class="highlighter-rouge">store</code> recebe um objeto <code class="highlighter-rouge">Request</code> que contem todos os dados da requisição <code class="highlighter-rouge">POST</code> no endpoint <code class="highlighter-rouge">/api/companies</code> onde criamos um novo model <code class="highlighter-rouge">Company</code> que após ser salvo retornamos o mesmo com o <strong>status</strong> <code class="highlighter-rouge">201</code>.<p>Enviando um simples <strong>payload</strong> contendo <code class="highlighter-rouge">name</code> e <code class="highlighter-rouge">email</code> e o <strong>Content-Type</strong> como <code class="highlighter-rouge">application/json</code> já conseguimos gravar nosso primeiro registro. Vou utilizar o <strong>cURL</strong> como exemplo, mas você pode utilizar o <strong>postman</strong> se preferir:<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST -d <span class="s1">'{"name": "My awesome company","email": "contact@company.com"}'</span> <span class="se">\</span>
  https://laravel-jobs-api.dev/api/companies</code></pre></figure><p>Feito isso temos o seguinte retorno:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="s2">"name"</span><span class="err">:</span> <span class="s2">"My awesome company"</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="err">:</span> <span class="s2">"contact@company.com"</span><span class="p">,</span>
  <span class="s2">"updated_at"</span><span class="err">:</span> <span class="s2">"2016-06-30 14:52:21"</span><span class="p">,</span>
  <span class="s2">"created_at"</span><span class="err">:</span> <span class="s2">"2016-06-30 14:52:21"</span><span class="p">,</span>
  <span class="s2">"id"</span><span class="err">:</span> <span class="mi">3</span>
<span class="p">}</span></code></pre></figure><p>Com o retorno da nossa empresa que possui o <code class="highlighter-rouge">id=3</code> já conseguimos criar um job que pertence a uma empresa, para isso a implementação no <code class="highlighter-rouge">JobsController</code> é tão simples quanto a que acabamos de desenvolver:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/JobsController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">JobsController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$job</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Job</span><span class="p">();</span>
        <span class="nv">$job</span><span class="o">-&gt;</span><span class="na">fill</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">());</span>
        <span class="nv">$job</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$job</span><span class="p">,</span> <span class="mi">201</span><span class="p">);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>Com o método <code class="highlighter-rouge">store</code> implementado exatamente como vimos anteriormente, já podemos utilizar o endpoint <code class="highlighter-rouge">/api/jobs</code> com o verbo <code class="highlighter-rouge">POST</code> com o seguinte <strong>payload</strong>:<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST -d <span class="s1">'{"title": "PHP Developer / Laravel Expert","description": "Laravel Expert", "local": "São Paulo", "remote": "no", "company_id": "3"}'</span> <span class="se">\</span>
  https://laravel-jobs-api.dev/api/jobs</code></pre></figure><p>Temos o seguinte retorno:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="s2">"title"</span><span class="err">:</span> <span class="s2">"PHP Developer / Laravel Expert"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="err">:</span> <span class="s2">"Laravel Expert"</span><span class="p">,</span>
  <span class="s2">"local"</span><span class="err">:</span> <span class="s2">"São Paulo"</span><span class="p">,</span>
  <span class="s2">"remote"</span><span class="err">:</span> <span class="s2">"no"</span><span class="p">,</span>
  <span class="s2">"company_id"</span><span class="err">:</span> <span class="s2">"3"</span><span class="p">,</span>
  <span class="s2">"updated_at"</span><span class="err">:</span> <span class="s2">"2016-07-02 20:23:47"</span><span class="p">,</span>
  <span class="s2">"created_at"</span><span class="err">:</span> <span class="s2">"2016-07-02 20:23:47"</span><span class="p">,</span>
  <span class="s2">"id"</span><span class="err">:</span> <span class="mi">5</span>
<span class="p">}</span></code></pre></figure><p><em>Em bash, utilizamos o caractere <strong>barra invertida/barra inversa</strong> <code class="highlighter-rouge">\</code> para permitir quebra de linha, mas você pode enviar uma única linha apenas retirando este caractere.</em><p>Eu sei que nosso código esta falho, pois se não enviarmos nenhum <strong>payload</strong> o registro será criado em branco e isso não é útil para nenhuma aplicação. Vamos ver diversas <strong>armadilhas e como contorná-las</strong> com implementações simples, no caso de cadastro <em>é falho passar o</em> <code class="highlighter-rouge">id</code> <em>da empresa</em> que esta cadastrando uma vaga, esse parâmetro deve <em>ser pego na sessão</em>.<h4 id="atualizando-registros">Atualizando registros</h4><p>Precisamos fornecer ao usuário uma forma para atualizar os dados em nossa aplicação, nesse caso, será razoavelmente simples, porem como mencionado acima, precisamos depois <strong>lidar com as armadilhas</strong> que estamos deixando para trás, como por exemplo <em>um usuário só pode atualizar seu próprio registro de empresa e suas prórias vagas</em>. Não é uma coisa difícil de se fazer, mas precisamos saber os problemas que teremos que resolver.<p>Vamos adicionar uma lógica simples em nossos controllers para atualizar os registros. Vamos começar em <code class="highlighter-rouge">JobsController</code> dessa vez:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/JobsController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">JobsController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$job</span> <span class="o">=</span> <span class="nx">Job</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$job</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
                <span class="s1">'message'</span>   <span class="o">=&gt;</span> <span class="s1">'Record not found'</span><span class="p">,</span>
            <span class="p">],</span> <span class="mi">404</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$job</span><span class="o">-&gt;</span><span class="na">fill</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">());</span>
        <span class="nv">$job</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$job</span><span class="p">);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>Esse código é bem similar aos que já implementamos, verificamos se o registro <code class="highlighter-rouge">$id</code> é <code class="highlighter-rouge">null</code>, se sim retornamos um <strong>erro</strong> <code class="highlighter-rouge">404</code>, se não retornamos atualizamos o registro atual e o retornamos. Podemos agora utilizar o verbo <code class="highlighter-rouge">PUT</code> no endpoint <code class="highlighter-rouge">/api/jobs/100</code> e teremos o seguinte retorno:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="s2">"message"</span><span class="err">:</span> <span class="s2">"Record not found"</span>
<span class="p">}</span></code></pre></figure><p>Neste exemplo estamos tentando atualizar o registro de <code class="highlighter-rouge">$id=100</code>, porem o mesmo ainda não foi criado então temos a mensagem de erro acima, mas caso o mesmo exista o registro atualizado nos sera retornado com o <strong>status</strong> <code class="highlighter-rouge">200</code>.<p>Você provavelmente já deve ter visto também uma implementação diferente, como esta:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/JobsController.php
</span><span class="o">...</span>
<span class="k">class</span> <span class="nc">JobsController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="nv">$job</span> <span class="o">=</span> <span class="nx">Job</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

            <span class="nv">$job</span><span class="o">-&gt;</span><span class="na">fill</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">());</span>
            <span class="nv">$job</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

            <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$job</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Illuminate\Database\Eloquent\ModelNotFoundException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>Esse é o exemplo de implementação default do Laravel que você pode achar em qualquer documentação ou tutorial com o seguinte retorno:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="s2">"error"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"description"</span><span class="err">:</span> <span class="s2">"Invalid URI"</span><span class="p">,</span>
    <span class="s2">"messages"</span><span class="err">:</span> <span class="p">[]</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure><p>Eu particularmente não sou muito fã, prefiro criar uma mensagem personalizada seguindo uma outra estrutura de resposta. <strong>Mas isso é gosto, ambas implementações funcionam bem</strong>.<p>Agora fazendo exatamente a mesma coisa em <code class="highlighter-rouge">CompaniesController</code>:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/CompaniesController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CompaniesController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$company</span> <span class="o">=</span> <span class="nx">Company</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$company</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
                <span class="s1">'message'</span>   <span class="o">=&gt;</span> <span class="s1">'Record not found'</span><span class="p">,</span>
            <span class="p">],</span> <span class="mi">404</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$company</span><span class="o">-&gt;</span><span class="na">fill</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">());</span>
        <span class="nv">$company</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$company</span><span class="p">);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>Agora é só testar via <strong>postman</strong> ou <strong>cURL</strong> e teremos o mesmo padrão de resposta implementado em <code class="highlighter-rouge">JobsController</code>.<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT -d <span class="s1">'{"name": "My new named company","email": "contact@newcompany.com"}'</span> <span class="se">\</span>
  https://laravel-jobs-api.dev/api/companies/3</code></pre></figure><p>Ja implementamos uma forma do usuário atualizar os registros, agora precisamos implementar uma forma de remove-los.<h4 id="deletando-registros">Deletando registros</h4><p>Essa sem dúvidas é a parte mais fácil a ser implementada, e aqui vamos deixar nossa última armadilha, por exemplo precisamos fazer a mesma validação e <em>verificar se o usuário é dono da vaga</em>, pois uma empresa só pode deletar suas próprias vagas.<p>O código para implementação é simplesmente ridículo, primeiro vou implementar em <code class="highlighter-rouge">CompaniesController</code> e em seguida em <code class="highlighter-rouge">JobsController</code>:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/CompaniesController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CompaniesController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">destroy</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$company</span> <span class="o">=</span> <span class="nx">Company</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$company</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
                <span class="s1">'message'</span>   <span class="o">=&gt;</span> <span class="s1">'Record not found'</span><span class="p">,</span>
            <span class="p">],</span> <span class="mi">404</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$company</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//app/Http/Controllers/JobsController.php
</span><span class="o">...</span>
<span class="k">use</span> <span class="nx">App\Http\Requests</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">JobsController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">destroy</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$job</span> <span class="o">=</span> <span class="nx">Job</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$job</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
                <span class="s1">'message'</span>   <span class="o">=&gt;</span> <span class="s1">'Record not found'</span><span class="p">,</span>
            <span class="p">],</span> <span class="mi">404</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$job</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>Implementado o método <code class="highlighter-rouge">destroy</code>, podemos ver como o código é realmente simples. Pegamos o id passado pelo endpoint <code class="highlighter-rouge">/api/jobs/:id</code> utilizando o verbo <code class="highlighter-rouge">DELETE</code> e pronto! Caso o registro não exista retornamos um <strong>erro</strong> <code class="highlighter-rouge">404</code> com uma mensagem personalizada. Você pode utilizar <code class="highlighter-rouge">findOrFail</code> em um bloco <code class="highlighter-rouge">try/catch</code> se preferir, mas de novo, isso vai de gosto.<p>Podemos perceber que não existe retorno de sucesso quando um registro é deletado, você poderia utilizar o <strong>status</strong> <code class="highlighter-rouge">204</code> <em>(No Content)</em> se preferir, mas eu acredito ser apenas um contexto perdido. Prefiro deixar <code class="highlighter-rouge">200</code> como padrão.<p>Existe <a href="http://blog.ploeh.dk/2013/04/30/rest-lesson-learned-avoid-204-responses/">esse post</a> do <a href="https://twitter.com/ploeh">Mark Seemann</a> que eu li a mais ou menos um ano atrás, ele explica algumas <strong>lições aprendidas desenvolvendo APIs REST</strong> e que me convenceram a não utilizar <strong>status</strong> <code class="highlighter-rouge">204</code> nas respostas. Você pode simplesmente ler e tirar sua conclusão.<blockquote><p>A DELETE request represents the intent to delete a resource. Thus, if the service successfully handles a DELETE request, what else can it do than returning a 204 (No Content)? After all, the resource has just been removed.</blockquote><h2 id="middlewares">Middlewares</h2><p>Conseguimos! Fizemos o CRUD básico, contudo deixamos varios problemas para trás, alguns bem críticos na verdade.<p>Middlewares são recursos que nos permitem interceptar requisições HTTP. Nesse caso vamos apenas proteger algumas rotas que necessitam do usuário estar autenticado. Caso contrário nós vamos retornar um erro informando que o usuário não esta logado.<p>Vou tentar ser breve, não vou explicar como criar um middleware customizado mas vou explicar os conceitos básicos. Primeiramente você precisa saber que todos os middlewares existentes no Laravel, estão localizados em <code class="highlighter-rouge">/app/Http/Kernel.php</code>. Por padrão a propriedade <code class="highlighter-rouge">$routeMiddleware</code> é um <code class="highlighter-rouge">Array</code> que contem a base de middlewares do framework, e para criar e adicionar um novo middleware basta apenas incluir no array seu caminho.<h4 id="middlewares-em-rotas-especificas">Middlewares em rotas especificas</h4><p>É possível utilizar um middleware para proteger uma rota especifica. Por exemplo:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">'admin/profile'</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Protected route
</span><span class="p">})</span><span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">'auth'</span><span class="p">);</span></code></pre></figure><p>Nesse caso estamos protegendo a rota <code class="highlighter-rouge">/admin/profile</code> com o middleware <code class="highlighter-rouge">auth</code>, que garante que o usuário precisa estar logado para acessar a determinada rota.<p>Também é possível utilizar mais de um middleware, onde serão validados um por um sequencialmente.<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">'admin/profile'</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Protected route
</span><span class="p">})</span><span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">'auth'</span><span class="p">,</span> <span class="s1">'custom'</span><span class="p">);</span></code></pre></figure><p>Também é possível utiliza-los em grupos de rotas:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">group</span><span class="p">([</span><span class="s1">'middleware'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'auth'</span><span class="p">]],</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Protected routes
</span><span class="p">});</span></code></pre></figure><p>Novamente o código é simples e irá deixar o grupo de routas protegidas com o middleware <code class="highlighter-rouge">auth</code>. Também é possível utilizar outros middlewares passando um <code class="highlighter-rouge">Array</code> como argumento.<h4 id="middlewares-em-controllers">Middlewares em controllers</h4><p>O conceito é o mesmo, proteger rotas especificas mas dessa vez através dos controllers. Podemos utilizar o método <code class="highlighter-rouge">$this-&gt;middleware()</code> em nosso contrutor desde que ele extenda o <code class="highlighter-rouge">Controller</code> base.<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="o">...</span>
<span class="k">class</span> <span class="nc">ApplicationController</span> <span class="k">extends</span> <span class="nx">Controller</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">'auth'</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">'auth'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'only'</span> <span class="o">=&gt;</span> <span class="s1">'update'</span><span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">'custom'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'except'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'index'</span><span class="p">,</span> <span class="s1">'show'</span><span class="p">]]]);</span>
    <span class="p">}</span>
<span class="o">...</span>
<span class="p">}</span></code></pre></figure><p>Seguindo mais ou menos o exemplo anterior, você também pode utilizar vários middleware, sendo que eles serão usados sequencialmente. No código de exemplo o primeiro middleware de <code class="highlighter-rouge">auth</code> vai deixar todas as rotas do controller seguras, porem eu também posso informar quais rotas eu quero aplicar meu middleware através do segundo parâmetro de configuração utilizando a chave <code class="highlighter-rouge">only</code> e os métodos/rotas que o middleware será aplicado. Também é possível aplicar o middleware em todas as rotas e remover algumas entradas expecificas utilizando a chave <code class="highlighter-rouge">except</code>.<p>Tanto em <code class="highlighter-rouge">JobsController</code> quanto em <code class="highlighter-rouge">CompaniesController</code> vamos adicionar a seguinte configuração de middleware:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="o">...</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">'auth'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'except'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'index'</span><span class="p">,</span> <span class="s1">'show'</span><span class="p">]]);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>Agora temos todas as rotas protegidas exceto os métodos <code class="highlighter-rouge">index</code> e <code class="highlighter-rouge">show</code> que são utilizados pelos verbo <code class="highlighter-rouge">GET</code> em ambos os controllers. Já conseguimos dar o básico de segurança em nossa aplicação, mas ainda temos muito o que fazer.<p>E agora vamos editar nosso middleware, apenas modificando seu comportamento padrão, e para isso vamos editar o método <code class="highlighter-rouge">handle</code> do middleware <code class="highlighter-rouge">Authenticate</code> em <code class="highlighter-rouge">/app/Http/Middleware/Authenticate.php</code>:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="o">...</span>

<span class="c1">// Original
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">ajax</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">(</span><span class="s1">'Unauthorized.'</span><span class="p">,</span> <span class="mi">401</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">guest</span><span class="p">(</span><span class="s1">'login'</span><span class="p">);</span>
    <span class="p">}</span>

<span class="c1">// Updated
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">auth</span><span class="o">-&gt;</span><span class="na">guest</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
            <span class="s1">'message'</span> <span class="o">=&gt;</span> <span class="s1">'Unauthorized'</span>
        <span class="p">],</span> <span class="mi">401</span><span class="p">);</span>
    <span class="p">}</span>
<span class="o">...</span></code></pre></figure><p>O que fizemos foi o seguinte, por padrão o middleware <code class="highlighter-rouge">Authenticate</code> faz dois níveis de verificação, sendo o primeiro se o usuário é convidado, ou seja se ele não esta em uma sessão. Já a segunda validação padrão é se a requisição é AJAX, se sim é retornado um <strong>erro</strong> <code class="highlighter-rouge">401</code> em texto plano, caso contrário o usuário é redirecionado para a página <code class="highlighter-rouge">/auth/login</code>.<p>O que fizemos foi tirar a validação das requisições e retornar uma única mensagem em formato JSON com <strong>erro</strong> <code class="highlighter-rouge">401</code>, obviamente vamos precisar tratar tokens e outras coisas mas vamos um passo por vez.<p>No próximo artigo vamos vamos cobrir os problemas criticos que deixamos para trás como <strong>validações de entrada</strong> para criação dos registros, criar nossa <strong>rota de autenticação</strong> que retornará um token válido, <strong>verificação e validação do token</strong> em nosso middleware de autenticação.<p>Peço desculpas a todos pois este artigo teve início a mais de um mês, porem como eu queria terminar tudo de uma vez, ficou faltando algumas partes, portanto vou deixar a parte restante para uma terceira e última parte da série.<h2 id="update">Update</h2><p>Eu já tinha começado esse artigo em julho, mas enrolei um pouco pra terminar a parte de autenticação, comecei a estudar outras coisas e esqueci completamente que faltava tão pouco pra termina-lo. Então decidi quebrar e deixar a parte de Auth para o final.<p>Desculpem =(</section><footer class="post__footer"><section class="share"><div class="container"><ul class="share__post-list"><li class="share__post-item" data-hint="Share on Facebook"> <a class="share__icon share__icon--facebook" href="https://facebook.com/sharer.php?u=http://localhost:4000/2016/construindo-restful-api-laravel-parte-2/" target="share-facebook" title="Share on Facebook"> <span class="share__text">Like</span></a> </a><li class="share__post-item" data-hint="Share on Twitter"> <a class="share__icon share__icon--twitter" href="https://twitter.com/intent/tweet?text=Construindo uma API RESTful com Laravel - Parte 2&url=http://localhost:4000/2016/construindo-restful-api-laravel-parte-2/&via=RafaellLycan&related=RafaellLycan" target="share-twitter" title="Share on Twitter"> <span class="share__text">Tweet</span></a> </a><li class="share__post-item" data-hint="Share on Google Plus"> <a class="share__icon share__icon--gplus" href="https://plus.google.com/share?url=http://localhost:4000/2016/construindo-restful-api-laravel-parte-2/" target="share-gplus" title="Share on Google Plus"> <span class="share__text">+1</span></a> </a></ul></div></section><section class="related container"><h3 class="related__title">References</h3><ul class="default-list"><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="https://vimeo.com/17785736" title="Teach a Dog to REST" target="_blank"> <span itemprop="name">Teach a Dog to REST</span> </a><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="https://laravel.com/docs/5.0/eloquent#eager-loading" title="Eloquent - eager-loading" target="_blank"> <span itemprop="name">Eloquent - eager-loading</span> </a><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="https://laravel.com/docs/5.0/controllers#restful-resource-controllers" title="RESTful Resource Controllers" target="_blank"> <span itemprop="name">RESTful Resource Controllers</span> </a><li class="related__mention" itemprop="mentions" itemscope itemtype="https://schema.org/Thing"> <a itemprop="url" href="https://laravel.com/docs/5.0/controllers#controller-middleware" title="Controller Middleware" target="_blank"> <span itemprop="name">Controller Middleware</span> </a></ul></section><section class="author" itemprop="author"><div class="author__content container" itemscope itemtype="http://schema.org/Person"><div class="author__pic"> <img src="http://gravatar.com/avatar/dd1c977c7a3e384a9cdae3b5ddd9b006?s=150" alt="" itemprop="image" class="img-rounded"></div><div class="author__bio"><h3 class="author__name" itemprop="name">Rafael Almeida</h3><p> A brazilian Front-end Engineer, living in Barcelona. Works with the web, loves photography and beers, and hates seafood. <a href="mailto:" class="email" itemprop="email"></a> <a href="https://twitter.com/RafaellLycan" class="twitter-follow-button" data-show-count="true"></a></div></div></section><a class="next-article " href="/2016/utilizando-laravel-valet/" title="Laravel Valet: Agilidade no seu ambiente local"> <span class="container"> <span class="next-article__heading">Next article:</span> <span class="next-article__title">Laravel Valet: Agilidade no seu ambiente local</span> <span class="next-article__description">Entenda como obter agilidade em um ambiente de desenvolvimento minimalista com essa alternativa ao Homestead mesmo se você não esta utilizando Laravel. </span> <button class="btn btn--outline">Read more &rarr;</button> </span> </a><section class="comments container"><h3 class="comments__title">Comments</h3><div id="disqus_thread"></div></section><script type="text/javascript"> var disqus_loaded = false; function load_disqus(){ disqus_loaded = true; var disqus_shortname = 'rafaelllycan'; var disqus_title = ''; var disqus_url = '/2016/construindo-restful-api-laravel-parte-2/'; var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); var ldr = document.getElementById('disqus_loader'); }; window.onscroll = function(e) { if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 600)) { if (!disqus_loaded) load_disqus(); } }; </script> </footer></article></main><footer class="footer" role="contentinfo"><div class="footer__content"> <span class="footer__copy">&copy; 2017 - Rafaell Lycan</span> <span class="footer__description">Made with ♥ using <a href="http://jekyllrb.com/">Jekyll</a> - &lt;/&gt; on <a href="https://github.com/rafaell-lycan" title="Hosted on GitHub">GitHub</a> </span><ul class="footer__social default-list"><li> <a href="#"> <i class="fa fa-twitter"></i> <span class="social-text">Twitter</span> </a><li> <a href="#"> <i class="fa fa-linkedin"></i> <span class="social-text">Linkedin</span> </a><li> <a href="#"> <i class="fa fa-github"></i> <span class="social-text">Github</span> </a></ul></div></footer> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-16383035-5', 'auto'); ga('require', 'displayfeatures'); ga('send', 'pageview'); </script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js?1493084291212194000"></script> <script async src="https://use.fontawesome.com/81e129060e.js?1493084291212194000"></script>  <script src="/assets/scripts/main.js?1493084291212194000"></script> <script> 'use strict'; WebFont.load({ google: { families: [ 'Merriweather:300,300i,900,900i', 'Open Sans: 400,700', 'Fira Mono: 400', ] } }); // if ('serviceWorker' in navigator && (window.location.protocol === 'https:' || window.location.hostname === 'localhost')) { // navigator.serviceWorker // .register('/sw.js?1493084291212194000') // .then(function(registration){console.log('Service Worker Registered.')}) // .catch(function(error){console.log('Error during service worker registration:', error)}); // } </script>
